{"version":3,"sources":["Data/tools.js","Components/ItemsListComponents/filterBar.js","Components/ItemsListComponents/ImagesSection.js","Components/ItemsListComponents/BackgroundsSection.js","Components/ItemsListComponents/UploadSection.js","Components/ItemsListComponents/ShareSection.js","Components/ToolsBar.js","Components/ItemsList.js","Components/ImageComponent.js","Components/CanvasBackground.js","Components/Canvas.js","App.js","index.js"],"names":["tools","id","title","icon","component","FilterBar","props","categoryArray","itemsToReturn","forEach","element","photoCategroy","photoCategory","indexOf","push","itemsWithoutDuplicates","items","className","onChange","e","target","value","map","val","i","api","WooCommerceRestApi","url","process","consumerKey","consumerSecret","version","ImagesSection","useState","setSelectedCategory","setItems","useEffect","getProductsFromWooCommerce","get","then","res","status","data","product","name","images","image","oldItems","catch","err","console","log","selectedCategory","item","src","alt","draggable","onDragStart","onChangeDragUrl","onClick","handleAddOnClick","BackgroundsSection","UploadSection","uploadedImages","setUploadedImage","window","onbeforeunload","localStorage","setItem","JSON","stringify","loadImages","parse","getItem","UploadButton","htmlFor","img","files","prevState","URL","createObjectURL","handleUpload","type","accept","hidden","UploadedImages","elementcategory","length","ShareSection","uri","stageRef","current","toDataURL","link","document","createElement","download","href","body","appendChild","click","removeChild","ToolsBar","tool","changeSelectedTool","ItemsList","selectedTools","setSelectedTools","componentsMap","imagesSection","backgroundsSection","uploadSection","shareSection","sidebarCollapse","setSidebarCollapse","resizeCanvasOnSidebarChange","Component","dragUrl","addToBackground","removeBackground","ImageComponent","shapeProps","isSelected","onSelect","handleDragStart","handleDragEnd","handleOnDelete","useImage","shapeRef","useRef","transformRef","nodes","getLayer","batchDraw","onDrop","onDragEnd","ref","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","onTransformEnd","node","scaleX","scaleY","width","Math","max","height","x","y","boundBoxFunc","oldBox","newBox","zIndex","fill","CanvasBackground","backgroundUrl","background","widthRatio","heightRatio","undefined","fillPatternImage","fillPatternRepeat","fillPatternScaleX","fillPatternScaleY","Canvas","stageWidth","stageHeight","scale","stageDimensions","setStageDimensions","containerRef","setDragUrl","dragId","setDragId","setImages","backgroundImage","setBackgroundImage","selectedId","setSelectedId","handleResize","clientWidth","addEventListener","imgSrc","newImages","filter","centerX","centerY","concat","setTimeout","preventDefault","setPointersPositions","getPointerPosition","onDragOver","onMouseDown","clickedOnEmpty","getStage","clikedOnBackground","getId","checkDeselect","moveToTop","slice","find","index","splice","onSelected","newAttrs","imagesToUpdate","singleImageToUpdate","handleTransformChange","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0d60a30a.chunk.js","sourcesContent":["import PhotoIcon from '@mui/icons-material/Photo';\nimport UploadFileRoundedIcon from \"@mui/icons-material/UploadFileRounded\";\nimport WallpaperIcon from '@mui/icons-material/Wallpaper';\nimport IosShareRoundedIcon from \"@mui/icons-material/IosShareRounded\";\n// below is list of components that appear in sidebar\n// id - unique id\n// title - title of tool\n// icon - imported icon from material ui\n// component - component string needed for conditional rendering in itemsList.js\nexport const tools = [\n  {\n    id: 0,\n    title: \"Photos\",\n    icon: <PhotoIcon />,\n    component: \"imagesSection\",\n  },\n  {\n    id: 1,\n    title: \"Backgrounds\",\n    icon: <WallpaperIcon />,\n    component: \"backgroundsSection\",\n  },\n  {\n    id: 2,\n    title: \"Uploads\",\n    icon: <UploadFileRoundedIcon />,\n    component: \"uploadSection\",\n  },\n  {\n    id: 3,\n    title: \"Share\",\n    icon: <IosShareRoundedIcon />,\n    component: \"shareSection\",\n  },\n];\n","import React from \"react\";\n\n// simple filterBar for conditional rendering images by categories in sidebar\n\nfunction FilterBar(props) {\n  // function to create array of list of uniques categories based on images categories in /Data/items.json\n  const itemsWithoutDuplicates = (itemsToReturn) => {\n    let categoryArray = [];\n    itemsToReturn.forEach((element) => {\n      let photoCategroy = element.photoCategory;\n      let isInArray = categoryArray.indexOf(photoCategroy);\n      if (isInArray === -1) {\n        categoryArray.push(photoCategroy);\n      }\n    });\n    return categoryArray;\n  };\n  const categoryArray = itemsWithoutDuplicates(props.items);\n  const handleFilterChange = (e) => {\n    props.onChange(e.target.value);\n  };\n\n  return (\n    <label className=\"categorySelectLabel\">\n      <select onChange={handleFilterChange} className=\"categorySelect\">\n        <option value=\"\">All</option>\n        {categoryArray.map((val, i) => (\n          <option key={i} value={val}>\n            {val}\n          </option>\n        ))}\n      </select>\n    </label>\n  );\n}\n\nexport default FilterBar;\n","/** @format */\n\nimport React, { useEffect, useState } from \"react\";\nimport FilterBar from \"./filterBar\";\nimport WooCommerceRestApi from \"@woocommerce/woocommerce-rest-api\";\n\nconst api = new WooCommerceRestApi({\n  url: process.env.REACT_APP_NEXT_PUBLIC_WORDPRESS_SITE,\n  consumerKey: process.env.REACT_APP_WC_CONSUMER_KEY,\n  consumerSecret: process.env.REACT_APP_WC_CONSUMER_SECRET,\n  version: \"wc/v3\",\n});\n\n// images can be dragged or clicked for adding it to canvas\n\nconst ImagesSection = (props) => {\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    getProductsFromWooCommerce();\n  }, []);\n\n  // useEffect(() => {\n  //   console.log(items);\n  // }, [items]);\n\n  // fetch images\n  const getProductsFromWooCommerce = () => {\n    setItems([]);\n    api\n      .get(\"products\")\n      .then((res) => {\n        if (res.status === 200) {\n          if (res.data) {\n            res.data.forEach((product) => {\n              if (\n                product.name !== \"Reverse Withdrawal Payment\" &&\n                product.images\n              ) {\n                product.images.forEach((image) => {\n                  setItems((oldItems) => [...oldItems, image]);\n                });\n              }\n            });\n          }\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  // filter images by selected category\n  const filterImagesByCategories = (array) => {\n    let filteredArrayToReturn;\n    if (selectedCategory.length > 0) {\n      filteredArrayToReturn = array.filter(\n        (el) => el.photoCategory === selectedCategory\n      );\n      return filteredArrayToReturn;\n    }\n    return array;\n  };\n\n  return (\n    <div className=\"itemsSection\">\n      <FilterBar\n        items={items}\n        onChange={(selectedCategory) => {\n          setSelectedCategory(selectedCategory);\n        }}\n      />\n\n      <div className=\"itemsWrapper\">\n        {items.map((item, i) => (\n          <div className=\"imageContainer\" key={i}>\n            <img\n              src={item.src}\n              alt={item.alt}\n              className=\"itemsImage\"\n              draggable=\"true\"\n              // elementCategory=\"All\"\n              onDragStart={(e) => {\n                props.onChangeDragUrl(e.target.src, item.id);\n              }}\n              onClick={(e) => {\n                console.log(e.target);\n                props.handleAddOnClick(e.target.src, item.id);\n              }}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ImagesSection;\n","/** @format */\n\nimport React from \"react\";\n\nfunction BackgroundsSection(props) {\n  // const backgroundsFilteredArray = items.filter(\n  //   (el) => el.elementCategory === \"backgrounds\"\n  // );\n\n  return <></>;\n  // return (\n  //   <div className=\"itemsSection\">\n  //     <div className=\"clearBackgroundWrap\">\n  //       <span\n  //       className=\"clearBackgroundText\"\n  //       onClick={() => {\n  //         props.removeBackground();\n  //       }}\n  //       >\n  //          Click to clear background\n  //       </span>\n  //     </div>\n  //     <div className=\"itemsWrapper\">\n  //       {backgroundsFilteredArray.map((item, i) => (\n  //         <div className=\"imageContainer\" key={i}>\n  //           <img\n  //             src={item.source}\n  //             alt=\"\"\n  //             className=\"itemsImage\"\n  //             draggable=\"false\"\n  //             elementcategory={item.elementCategory}\n  //             onClick={(e) => {\n  //               props.addToBackground(e.target.src);\n  //             }}\n  //           />\n  //         </div>\n  //       ))}\n  //     </div>\n  //   </div>\n  // );\n}\n\nexport default BackgroundsSection;\n","import React, { useState, useEffect } from \"react\";\nimport UploadRoundedIcon from \"@mui/icons-material/UploadRounded\";\n\n// images can be uploaded to client side manually\n// for temporary storing data of images I used localstorage\n\nfunction UploadSection(props) {\n  const [uploadedImages, setUploadedImage] = useState([]);\n\n  // clear localstorage on tab close to prevent loading blank images\n  window.onbeforeunload = function () {\n    const emptyArray = []\n    localStorage.setItem(\"uploadedImages\", JSON.stringify(emptyArray));\n  };\n\n  // saving state to local storage to prevent deleting uploaded images after closing tab with \"uploads\"\n  useEffect(() => {\n    const loadImages = JSON.parse(localStorage.getItem(\"uploadedImages\"));\n    setUploadedImage(loadImages);\n  }, []);\n\n  // adding images to localstorage every upload\n  useEffect(() => {\n    localStorage.setItem(\n      \"uploadedImages\",\n      JSON.stringify(uploadedImages)\n    );\n  }, [uploadedImages]);\n\n  const UploadButton = () => {\n    const handleUpload = (e) => {\n      let img = e.target.files[0];\n      setUploadedImage((prevState) => [...prevState, URL.createObjectURL(img)]);\n    };\n    return (\n      <div className=\"uploadImageWrap\">\n        <label\n          htmlFor=\"contained-button-upload\"\n          className=\"uploadImageButton\"\n          onChange={(e) => handleUpload(e)}\n        >\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            id=\"contained-button-upload\"\n            hidden\n          />\n          <UploadRoundedIcon />\n          <span className=\"uploadImageText\">Upload</span>\n        </label>\n      </div>\n    );\n  };\n\n  const UploadedImages = () => {\n    return uploadedImages?.map((item, i) => (\n      <div className=\"imageContainer\" key={i}>\n        <img\n          src={item}\n          alt=\"\"\n          className=\"itemsImage\"\n          draggable=\"true\"\n          elementcategory={item}\n          onDragStart={(e) => {\n            props.onChangeDragUrl(e.target.src);\n          }}\n          onClick={(e) => {\n            props.handleAddOnClick(e.target.src);\n          }}\n        />\n      </div>\n    ));\n  };\n\n  // check if localstorage is empty, if empty display tooltip instead array of images\n  const checkUploadedImagesNotEmpty = () => {\n    if (uploadedImages.length > 0) {\n      return true;\n    }\n    return false;\n  };\n\n\n  return (\n    <div className=\"itemsSection\">\n      <UploadButton />\n      {checkUploadedImagesNotEmpty() ? (\n        <UploadedImages />\n      ) : (\n        <p className=\"uploadTooltip\">Upload your images with button above.</p>\n      )}\n    </div>\n  );\n}\n\nexport default UploadSection;\n","import React from \"react\";\nimport DownloadRoundedIcon from \"@mui/icons-material/DownloadRounded\";\n\nfunction ShareSection(props) {\n  // function that creates hyperlink with canvas DataURL as href\n  // programically clicks it to download the image\n  // after download hyperlink is being removed from DOM\n    const handleExport = () => {\n      const uri = props.stageRef.current.toDataURL();\n      const link = document.createElement(\"a\");\n      console.log(uri);\n      console.log(link);\n      link.download = \"moodboard-export.png\";\n      link.href = uri;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    };\n\n    return (\n      <div className=\"itemsSection\">\n        <div className=\"shareSectionWrap\">\n          <button onClick={handleExport} className=\"downloadImage\">\n            <DownloadRoundedIcon />\n            Export canvas as image\n          </button>\n        </div>\n      </div>\n    );\n}\n\nexport default ShareSection;","/** @format */\n\nimport React from \"react\";\nimport { tools } from \"../Data/tools\";\n\n// list of tools imported from /Data/tools.js\n\nfunction ToolsBar(props) {\n  return (\n    <div className=\"toolsBarWrap\">\n      <div className=\"toolsBarBody\">\n        <div className=\"toolsItemsWrap\">\n          {tools.map((tool, i) => (\n            <div\n              className=\"toolsItem\"\n              key={i}\n              onClick={() => {\n                props.changeSelectedTool(i);\n              }}\n            >\n              <div className=\"toolsItemContent\">\n                <span className=\"toolIcon\">{tool.icon}</span>\n                <span className=\"toolTitle\">{tool.title}</span>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ToolsBar;\n","/** @format */\n\nimport React, { useState, useEffect } from \"react\";\nimport \"./Styles/itemsList.css\";\nimport { tools } from \"../Data/tools\";\n\nimport ImagesSection from \"./ItemsListComponents/ImagesSection\";\nimport BackgroundsSection from \"./ItemsListComponents/BackgroundsSection\";\nimport UploadSection from \"./ItemsListComponents/UploadSection\";\nimport ShareSection from \"./ItemsListComponents/ShareSection\";\nimport ToolsBar from \"./ToolsBar\";\n\nimport ExpandLessRoundedIcon from \"@mui/icons-material/ExpandLessRounded\";\n\nconst ItemsList = (props) => {\n  const [selectedTools, setSelectedTools] = useState(0);\n  // componentsMap keys must be same with components key value in /Data/tools.js\n  const componentsMap = {\n    imagesSection: ImagesSection,\n    backgroundsSection: BackgroundsSection,\n    uploadSection: UploadSection,\n    shareSection: ShareSection,\n  };\n  const [sidebarCollapse, setSidebarCollapse] = useState(true);\n\n  const changeSelectedTool = (id) => {\n    setSelectedTools(id);\n  };\n\n  const openMenuOnClick = () => {\n    sidebarCollapse ? setSidebarCollapse(false) : setSidebarCollapse(true);\n  };\n\n  const handleCanvasResizeOnSidebarChange = () => {\n    props.resizeCanvasOnSidebarChange();\n  };\n\n  // everytime when sidebar state changes function in Canvas.js is being called for resizing canvas dimensions\n  useEffect(() => {\n    handleCanvasResizeOnSidebarChange();\n  }, [sidebarCollapse]);\n\n  return (\n    <div\n      className={`itemsListWrap ${\n        sidebarCollapse ? \"sidebarOpen\" : \"sidebarClosed\"\n      }`}\n    >\n      <div className=\"expandButton\" onClick={() => openMenuOnClick()}>\n        <ExpandLessRoundedIcon />\n      </div>\n      <div className=\"itemsListBody\">\n        <ToolsBar changeSelectedTool={changeSelectedTool} />\n\n        {tools.map((val) => {\n          if (val.id === selectedTools) {\n            const Component = componentsMap[val.component];\n            return (\n              <Component\n                key={val.id}\n                onChangeDragUrl={props.onChangeDragUrl}\n                handleAddOnClick={props.handleAddOnClick}\n                dragUrl={props.dragUrl}\n                addToBackground={props.addToBackground}\n                removeBackground={props.removeBackground}\n                stageRef={props.stageRef}\n              />\n            );\n          }\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ItemsList;\n","/** @format */\n\nimport React, { useRef, useEffect, Fragment } from \"react\";\nimport { Image, Path, Transformer } from \"react-konva\";\nimport useImage from \"use-image\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\n// image component that contains various event handlers\n// image component is used for passing it to Konva canvas\n\nconst ImageComponent = ({\n  image,\n  shapeProps,\n  id,\n  isSelected,\n  onSelect,\n  handleDragStart,\n  handleDragEnd,\n  onChange,\n  handleOnDelete,\n}) => {\n  // creating image based on its src\n  const [img] = useImage(image?.src);\n  const shapeRef = useRef();\n  const transformRef = useRef();\n\n  // if selected create box around the image to allow performing resizes\n  useEffect(() => {\n    if (isSelected) {\n      transformRef.current.nodes([shapeRef.current]);\n      transformRef.current.getLayer().batchDraw();\n    }\n  }, [isSelected]);\n\n  // called when performed resize\n  const handleTransformOnEnd = (e) => {\n    // node - reference to image\n    const node = shapeRef.current;\n    const scaleX = node.scaleX();\n    const scaleY = node.scaleY();\n    node.scaleX(1);\n    node.scaleY(1);\n    node.width(Math.max(5, node.width() * scaleX));\n    node.height(Math.max(node.height() * scaleY));\n    onChange({\n      ...shapeProps,\n      x: node.x(),\n      y: node.y(),\n      // set minimal value\n      width: node.width(),\n      height: node.height(),\n    });\n  };\n\n  const handleOnDrop = (e) => {};\n  return (\n    <Fragment>\n      <Image\n        image={img}\n        id={id}\n        draggable\n        onDrop={handleOnDrop}\n        onDragStart={handleDragStart}\n        onDragEnd={handleDragEnd}\n        onClick={onSelect}\n        ref={shapeRef}\n        {...shapeProps}\n        shadowColor=\"black\"\n        shadowBlur={10}\n        shadowOffsetX={0}\n        shadowOffsetY={4}\n        shadowOpacity={0.6}\n        onTransformEnd={handleTransformOnEnd}\n      />\n      {isSelected && (\n        // when selected it creates box around the image to perform resizes\n        <Transformer\n          ref={transformRef}\n          boundBoxFunc={(oldBox, newBox) => {\n            // limit resize\n            if (newBox.width < 5 || newBox.height < 5) {\n              return oldBox;\n            }\n            return newBox;\n          }}\n          zIndex={500}\n        >\n          <Path\n            fill=\"black\"\n            x={-30}\n            y={-30}\n            data=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n            onClick={() => handleOnDelete(img.src)}\n          />\n        </Transformer>\n      )}\n    </Fragment>\n  );\n};\n\nexport default ImageComponent;\n","import React from 'react';\nimport { Rect } from 'react-konva';\nimport useImage from 'use-image';\n\n// Konva way of adding background image to canvas\n// creating Rect Konva component\n// placing it at the bottom of all elements\n// changing its z-index to lowest value\n\nfunction CanvasBackground({ backgroundUrl, width, height }) {\n  // create image of image src\n  const [background] = useImage(backgroundUrl);\n  // calculations to fill the whole area of canvas\n  let widthRatio = 1, heightRatio = 1;\n  if(background !== undefined) {\n    widthRatio = width / background.width;\n    heightRatio = height / background.height;\n  }\n  return (\n    <Rect\n      x={0}\n      y={0}\n      zIndex={-100}\n      width={width}\n      height={height}\n      fillPatternImage={background}\n      fillPatternRepeat={'no-repeat'}\n      fillPatternScaleX={widthRatio}\n      fillPatternScaleY={heightRatio}\n      id=\"canvasBackground\"\n      >\n    </Rect>\n  )\n}\n\nexport default CanvasBackground\n","/** @format */\n\nimport React, { useRef, useState, useEffect } from \"react\";\nimport { Stage, Layer } from \"react-konva\";\nimport \"./Styles/canvas.css\";\nimport ItemsList from \"./ItemsList\";\nimport ImageComponent from \"./ImageComponent\";\nimport CanvasBackground from \"./CanvasBackground\";\n\nconst Canvas = () => {\n  // static canvas dimensions used for scaling ratio\n  const stageWidth = 2000,\n    stageHeight = 2000;\n  // dynamic canvas dimensions\n  const [stageDimensions, setStageDimensions] = useState({\n    width: stageWidth,\n    height: stageHeight,\n    scale: 1,\n  });\n  // stageRef is used for handling callbacks - example: getting canvas positions after drag and rop\n  const stageRef = useRef();\n  // containerRef is used for dynamic canvas scalling\n  // main purpose of containerRef is to get width of parent div of canvas stage\n  const containerRef = useRef();\n  // dragUrl stores temporary src of dragged image\n  const [dragUrl, setDragUrl] = useState();\n  const [dragId, setDragId] = useState();\n  // images stores images that are added to canvas\n  const [images, setImages] = useState([]);\n  // backgroundImage is used for setting backgroundImage of canvas\n  const [backgroundImage, setBackgroundImage] = useState();\n  // selectedId is used for keeping selected image to handle resizes, z-index priority etc.\n  const [selectedId, setSelectedId] = useState(null);\n\n  // function to handle resize of canvas dimensions based on window width or when sidebar is closed or opened\n  const handleResize = () => {\n    let sceneWidth = containerRef.current.clientWidth;\n    let scale = sceneWidth / stageWidth;\n    setStageDimensions({\n      width: stageWidth * scale,\n      height: stageHeight * scale,\n      scale: scale,\n    });\n  };\n\n  // add eventListener for every window resize to call handleResize function\n  useEffect(() => {\n    handleResize();\n    window.addEventListener(\"resize\", handleResize, false);\n    return () => window.addEventListener(\"resize\", handleResize, false);\n  }, []);\n\n  // if clicked on empty space of canvas, including backgroundImage perform deselect item\n  const checkDeselect = (e) => {\n    const clickedOnEmpty = e.target === e.target.getStage();\n    const clikedOnBackground = e.target.getId() === \"canvasBackground\";\n    if (clickedOnEmpty || clikedOnBackground) {\n      setSelectedId(null);\n    }\n  };\n\n  // when element is dragged pass its image src to allow it for adding it to canvas\n  const onChangeDragUrl = (dragUrl, id) => {\n    setDragUrl(dragUrl);\n    setDragId(id);\n  };\n\n  // update image attributes when performing resize\n  const handleTransformChange = (newAttrs, i) => {\n    let imagesToUpdate = images;\n    let singleImageToUpdate = imagesToUpdate[i];\n    // update old attributes\n    singleImageToUpdate = newAttrs;\n    imagesToUpdate[i] = singleImageToUpdate;\n    setImages(imagesToUpdate);\n  };\n\n  // function to handle adding images on drag and drop to canvas\n  const handleOnDrop = (e, id) => {\n    e.preventDefault();\n    stageRef.current.setPointersPositions(e);\n    setImages(\n      images.concat([\n        {\n          ...stageRef.current.getPointerPosition(),\n          src: dragUrl,\n          id: dragId,\n        },\n      ])\n    );\n  };\n\n  // Removes image\n  const handleOnDelete = (imgSrc) => {\n    const newImages = images.filter((image) => image.src !== imgSrc);\n    setImages(newImages);\n  };\n\n  // function to handle adding images on click\n  const handleAddOnClick = (src, id) => {\n    let centerX = stageDimensions.width / 2;\n    let centerY = stageDimensions.height / 2;\n    setImages(\n      images.concat([\n        {\n          x: centerX,\n          y: centerY,\n          src: src,\n          id: id,\n        },\n      ])\n    );\n  };\n\n  // function to handle adding background image of canvas\n  const addToBackground = (backgroundUrl) => {\n    setBackgroundImage(backgroundUrl);\n  };\n\n  // function to handle removing background image of canvas\n  const removeBackground = () => {\n    setBackgroundImage(null);\n  };\n\n  // when sidebar state changes this function is being called\n  const resizeCanvasOnSidebarChange = () => {\n    // wait for sidebar animation to complete\n    setTimeout(() => {\n      handleResize();\n    }, 420);\n  };\n\n  const onSelected = (e, id) => {\n    setSelectedId(id);\n    e.target.moveToTop();\n    setImages((images) => {\n      const newImages = images.slice();\n      const img = images.find((i) => id === i.id);\n      const index = images.indexOf(img);\n      newImages.splice(index, 1);\n      newImages.push(img);\n      return newImages;\n    });\n  };\n\n  const handleDragStart = (e, id) => {\n    setSelectedId(id);\n    e.target.moveToTop();\n    setImages((images) => {\n      const newImages = images.slice();\n      const img = images.find((i) => id === i.id);\n      const index = images.indexOf(img);\n      newImages.splice(index, 1);\n      newImages.push(img);\n      return newImages;\n    });\n  };\n\n  const handleDragEnd = (e) => {};\n\n  return (\n    <div className=\"workContainer\">\n      <ItemsList\n        dragUrl={dragUrl}\n        onChangeDragUrl={onChangeDragUrl}\n        handleAddOnClick={handleAddOnClick}\n        addToBackground={addToBackground}\n        removeBackground={removeBackground}\n        resizeCanvasOnSidebarChange={resizeCanvasOnSidebarChange}\n        stageRef={stageRef}\n      />\n\n      <div className=\"canvasWrap\">\n        <div\n          className=\"canvasBody\"\n          ref={containerRef}\n          onDrop={handleOnDrop}\n          onDragOver={(e) => e.preventDefault()}\n        >\n          <Stage\n            width={stageDimensions.width}\n            height={stageDimensions.height}\n            scaleX={stageDimensions.scale}\n            scaleY={stageDimensions.scale}\n            className=\"canvasStage\"\n            ref={stageRef}\n            onMouseDown={(e) => {\n              // deselect when clicked on empty area or background image\n              checkDeselect(e);\n            }}\n          >\n            <Layer>\n              {typeof backgroundImage === \"string\" && (\n                // check if background image is not empty, default state is null\n                <CanvasBackground\n                  backgroundUrl={backgroundImage}\n                  width={stageWidth}\n                  height={stageHeight}\n                />\n              )}\n              {images.map((image, i) => {\n                return (\n                  <ImageComponent\n                    image={image}\n                    shapeProps={image}\n                    id={image?.id}\n                    key={image?.id}\n                    isSelected={image?.id === selectedId}\n                    onSelect={(e) => onSelected(e, image?.id)}\n                    handleDragStart={(e) => handleDragStart(e, image?.id)}\n                    handleDragEnd={handleDragEnd}\n                    onChange={(newAttrs) => {\n                      handleTransformChange(newAttrs, i);\n                    }}\n                    handleOnDelete={handleOnDelete}\n                  />\n                );\n              })}\n            </Layer>\n          </Stage>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Canvas;\n","/** @format */\n\nimport React from \"react\";\nimport Canvas from \"./Components/Canvas\";\n\nfunction App() {\n  return (\n    <div className=\"bodyWrap\">\n      <Canvas />\n    </div>\n  );\n}\n\nexport default App;\n","/** @format */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./Assets/Styles/index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}