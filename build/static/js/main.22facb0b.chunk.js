(this["webpackJsonpreact-moodboard"]=this["webpackJsonpreact-moodboard"]||[]).push([[0],{117:function(e,t){},119:function(e,t){},131:function(e,t){},133:function(e,t){},153:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(66),r=n.n(o),i=(n(86),n(9)),s=n(7),d=n(17),l=(n(89),n(90),n(68)),u=n.n(l),j=n(71),b=n.n(j),h=n(70),g=n.n(h),f=n(72),O=n.n(f),m=n(2),v=[{id:0,title:"Photos",icon:Object(m.jsx)(u.a,{}),component:"imagesSection"},{id:1,title:"Backgrounds",icon:Object(m.jsx)(g.a,{}),component:"backgroundsSection"},{id:2,title:"Uploads",icon:Object(m.jsx)(b.a,{}),component:"uploadSection"},{id:3,title:"Share",icon:Object(m.jsx)(O.a,{}),component:"shareSection"}],x=n(10);var p=function(e){var t=function(e){var t=[];return e.forEach((function(e){var n=e.photoCategory;-1===t.indexOf(n)&&t.push(n)})),t}(e.items);return Object(m.jsx)("label",{className:"categorySelectLabel",children:Object(m.jsxs)("select",{onChange:function(t){e.onChange(t.target.value)},className:"categorySelect",children:[Object(m.jsx)("option",{value:"",children:"All"}),t.map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},t)}))]})})},S=new(n(73).a)({url:"https://aetava.com",consumerKey:"ck_5d12676cfabf6f515105f76db0fbb73ca0039573",consumerSecret:"cs_8d3ab8468c84f15315c51417cc1a74625dbbc61a",version:"wc/v3"}),w=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=(n[0],n[1]),o=Object(a.useState)([]),r=Object(s.a)(o,2),i=r[0],d=r[1];Object(a.useEffect)((function(){l()}),[]);var l=function(){d([]),S.get("products").then((function(e){200===e.status&&e.data&&e.data.forEach((function(e){"Reverse Withdrawal Payment"!==e.name&&e.images&&e.images.forEach((function(e){d((function(t){return[].concat(Object(x.a)(t),[e])}))}))}))})).catch((function(e){console.log(e)}))};return Object(m.jsxs)("div",{className:"itemsSection",children:[Object(m.jsx)(p,{items:i,onChange:function(e){c(e)}}),Object(m.jsx)("div",{className:"itemsWrapper",children:i.map((function(t,n){return Object(m.jsx)("div",{className:"imageContainer",children:Object(m.jsx)("img",{src:t.src,alt:t.alt,className:"itemsImage",draggable:"true",onDragStart:function(t){e.onChangeDragUrl(t.target.src)},onClick:function(t){console.log(t.target),e.handleAddOnClick(t.target.src)}})},n)}))})]})};var C=function(e){return Object(m.jsx)(m.Fragment,{})},N=n(77),y=n.n(N);var k=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1];window.onbeforeunload=function(){localStorage.setItem("uploadedImages",JSON.stringify([]))},Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("uploadedImages"));o(e)}),[]),Object(a.useEffect)((function(){localStorage.setItem("uploadedImages",JSON.stringify(c))}),[c]);var r=function(){return Object(m.jsx)("div",{className:"uploadImageWrap",children:Object(m.jsxs)("label",{htmlFor:"contained-button-upload",className:"uploadImageButton",onChange:function(e){return function(e){var t=e.target.files[0];o((function(e){return[].concat(Object(x.a)(e),[URL.createObjectURL(t)])}))}(e)},children:[Object(m.jsx)("input",{type:"file",accept:"image/*",id:"contained-button-upload",hidden:!0}),Object(m.jsx)(y.a,{}),Object(m.jsx)("span",{className:"uploadImageText",children:"Upload"})]})})},i=function(){return null===c||void 0===c?void 0:c.map((function(t,n){return Object(m.jsx)("div",{className:"imageContainer",children:Object(m.jsx)("img",{src:t,alt:"",className:"itemsImage",draggable:"true",elementcategory:t,onDragStart:function(t){e.onChangeDragUrl(t.target.src)},onClick:function(t){e.handleAddOnClick(t.target.src)}})},n)}))};return Object(m.jsxs)("div",{className:"itemsSection",children:[Object(m.jsx)(r,{}),c.length>0?Object(m.jsx)(i,{}):Object(m.jsx)("p",{className:"uploadTooltip",children:"Upload your images with button above."})]})},B=n(78),I=n.n(B);var D=function(e){return Object(m.jsx)("div",{className:"itemsSection",children:Object(m.jsx)("div",{className:"shareSectionWrap",children:Object(m.jsxs)("button",{onClick:function(){var t=e.stageRef.current.toDataURL(),n=document.createElement("a");console.log(t),console.log(n),n.download="moodboard-export.png",n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},className:"downloadImage",children:[Object(m.jsx)(I.a,{}),"Export canvas as image"]})})})};var E=function(e){return Object(m.jsx)("div",{className:"toolsBarWrap",children:Object(m.jsx)("div",{className:"toolsBarBody",children:Object(m.jsx)("div",{className:"toolsItemsWrap",children:v.map((function(t,n){return Object(m.jsx)("div",{className:"toolsItem",onClick:function(){e.changeSelectedTool(n)},children:Object(m.jsxs)("div",{className:"toolsItemContent",children:[Object(m.jsx)("span",{className:"toolIcon",children:t.icon}),Object(m.jsx)("span",{className:"toolTitle",children:t.title})]})},n)}))})})})},U=n(79),R=n.n(U),T=function(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),c=n[0],o=n[1],r={imagesSection:w,backgroundsSection:C,uploadSection:k,shareSection:D},i=Object(a.useState)(!0),d=Object(s.a)(i,2),l=d[0],u=d[1];return Object(a.useEffect)((function(){e.resizeCanvasOnSidebarChange()}),[l]),Object(m.jsxs)("div",{className:"itemsListWrap ".concat(l?"sidebarOpen":"sidebarClosed"),children:[Object(m.jsx)("div",{className:"expandButton",onClick:function(){u(!l)},children:Object(m.jsx)(R.a,{})}),Object(m.jsxs)("div",{className:"itemsListBody",children:[Object(m.jsx)(E,{changeSelectedTool:function(e){o(e)}}),v.map((function(t){if(t.id===c){var n=r[t.component];return Object(m.jsx)(n,{onChangeDragUrl:e.onChangeDragUrl,handleAddOnClick:e.handleAddOnClick,dragUrl:e.dragUrl,addToBackground:e.addToBackground,removeBackground:e.removeBackground,stageRef:e.stageRef},t.id)}}))]})]})},P=n(35),W=n.n(P),L=function(e){var t=e.image,n=e.shapeProps,c=e.id,o=e.isSelected,r=e.onSelect,l=e.onChange,u=W()(t.src),j=Object(s.a)(u,1)[0],b=Object(a.useRef)(),h=Object(a.useRef)();Object(a.useEffect)((function(){o&&(h.current.setNode(b.current),h.current.getLayer().batchDraw())}),[o]);return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(d.a,Object(i.a)(Object(i.a)({image:j,id:c,draggable:!0,onDrop:function(e){l(Object(i.a)(Object(i.a)({},n),{},{x:e.target.x(),y:e.target.y()}))},onDragStart:function(e){l(Object(i.a)(Object(i.a)({},n),{},{x:e.target.x(),y:e.target.y()})),r(e),e.target.moveToTop(),e.target.setAttrs({shadowOffset:{x:0,y:0},scaleX:1.05,scaleY:1.05,shadowBlur:16,ShadowOpacity:.6})},onDragEnd:function(e){e.target.to({duration:.1,scaleX:1,scaleY:1,shadowOffsetX:0,shadowOffsetY:4,shadowBlur:10,ShadowOpacity:.4}),l(Object(i.a)(Object(i.a)({},n),{},{x:e.target.x(),y:e.target.y()}))},onClick:r,onTap:r,ref:b},n),{},{shadowColor:"black",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:4,shadowOpacity:.6,onTransformEnd:function(e){var t=b.current,a=t.scaleX(),c=t.scaleY();t.scaleX(1),t.scaleY(1),t.width(Math.max(5,t.width()*a)),t.height(Math.max(t.height()*c)),l(Object(i.a)(Object(i.a)({},n),{},{x:t.x(),y:t.y(),width:t.width(),height:t.height()}))}})),o&&Object(m.jsx)(d.e,{ref:h,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})};var X=function(e){var t=e.backgroundUrl,n=e.width,a=e.height,c=W()(t),o=Object(s.a)(c,1)[0],r=1,i=1;return void 0!==o&&(r=n/o.width,i=a/o.height),Object(m.jsx)(d.c,{x:0,y:0,zIndex:-100,width:n,height:a,fillPatternImage:o,fillPatternRepeat:"no-repeat",fillPatternScaleX:r,fillPatternScaleY:i,id:"canvasBackground"})},Y=function(){var e=2e3,t=2e3,n=Object(a.useState)({width:e,height:t,scale:1}),c=Object(s.a)(n,2),o=c[0],r=c[1],l=Object(a.useRef)(),u=Object(a.useRef)(),j=Object(a.useState)(),b=Object(s.a)(j,2),h=b[0],g=b[1],f=Object(a.useState)([]),O=Object(s.a)(f,2),v=O[0],x=O[1],p=Object(a.useState)(),S=Object(s.a)(p,2),w=S[0],C=S[1],N=Object(a.useState)(null),y=Object(s.a)(N,2),k=y[0],B=y[1],I=function(){var n=u.current.clientWidth/e;r({width:e*n,height:t*n,scale:n})};Object(a.useEffect)((function(){return I(),window.addEventListener("resize",I,!1),function(){return window.addEventListener("resize",I,!1)}}),[]);var D=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{id:t})};return Object(m.jsxs)("div",{className:"workContainer",children:[Object(m.jsx)(T,{dragUrl:h,onChangeDragUrl:function(e){g(e)},handleAddOnClick:function(e){var t=o.width/2,n=o.height/2;x(v.concat([{x:t,y:n,src:e}]))},addToBackground:function(e){C(e)},removeBackground:function(){C(null)},resizeCanvasOnSidebarChange:function(){setTimeout((function(){I()}),420)},stageRef:l}),Object(m.jsx)("div",{className:"canvasWrap",children:Object(m.jsx)("div",{className:"canvasBody",ref:u,onDrop:function(e){e.preventDefault(),l.current.setPointersPositions(e),x(v.concat([Object(i.a)(Object(i.a)({},l.current.getPointerPosition()),{},{src:h})]))},onDragOver:function(e){return e.preventDefault()},children:Object(m.jsx)(d.d,{width:o.width,height:o.height,scaleX:o.scale,scaleY:o.scale,className:"canvasStage",ref:l,onMouseDown:function(e){!function(e){var t=e.target===e.target.getStage(),n="canvasBackground"===e.target.getId();(t||n)&&B(null)}(e)},children:Object(m.jsxs)(d.b,{children:["string"===typeof w&&Object(m.jsx)(X,{backgroundUrl:w,width:e,height:t}),v.map((function(e,t){return Object(m.jsx)(L,{image:e,shapeProps:D(e,"image".concat(t)),id:"image".concat(t),isSelected:t===k,onSelect:function(){B(t)},onChange:function(e){!function(e,t){var n=v,a=n[t];a=e,n[t]=a,x(n)}(e,t)}},t)}))]})})})})]})};var A=function(){return Object(m.jsx)("div",{className:"bodyWrap",children:Object(m.jsx)(Y,{})})};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(A,{})}),document.getElementById("root"))},86:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){}},[[153,1,2]]]);
//# sourceMappingURL=main.22facb0b.chunk.js.map